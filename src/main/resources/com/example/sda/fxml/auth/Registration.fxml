<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Hyperlink?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>

<StackPane styleClass="body"
           stylesheets="@../../css/styles/Registration.css"
           xmlns="http://javafx.com/javafx/21"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.example.sda.controllers.auth.RegistrationController">

    <!-- Main Container - HBox -->
    <!-- Added alignment and max sizes to ensure it fills the screen properly -->
    <HBox alignment="CENTER" maxHeight="Infinity" maxWidth="Infinity" styleClass="main-container">

        <!-- Left Panel - VBox (Features) - ~40% Width -->
        <VBox alignment="CENTER_LEFT" maxWidth="Infinity" prefWidth="400" styleClass="left-panel" HBox.hgrow="ALWAYS">
            <padding>
                <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
            </padding>

            <VBox alignment="CENTER_LEFT" spacing="5">
                <!-- Logo -->
                <HBox alignment="CENTER_LEFT" styleClass="logo-container">
                    <Text styleClass="logo" text="Acad" />
                    <Text styleClass="logo, logo-accent" text="Bridge" />
                </HBox>

                <!-- Tagline -->
                <Text styleClass="tagline" text="Connect. Learn. Excel.&#10;The ultimate mentorship platform." />
            </VBox>

            <!-- Features List - VBox -->
            <!-- Using VBox.vgrow to push content properly -->
            <VBox alignment="CENTER_LEFT" spacing="20" styleClass="features-list" VBox.vgrow="ALWAYS">
                <HBox alignment="CENTER_LEFT" spacing="15" styleClass="feature-item">
                    <Region styleClass="feature-icon" />
                    <Text styleClass="feature-text" text="Access project repositories" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="15" styleClass="feature-item">
                    <Region styleClass="feature-icon" />
                    <Text styleClass="feature-text" text="Connect with expert mentors" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="15" styleClass="feature-item">
                    <Region styleClass="feature-icon" />
                    <Text styleClass="feature-text" text="Share academic resources" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="15" styleClass="feature-item">
                    <Region styleClass="feature-icon" />
                    <Text styleClass="feature-text" text="Build your network" />
                </HBox>
            </VBox>

            <!-- Decorative bottom element or spacer -->
            <Region VBox.vgrow="ALWAYS" />
        </VBox>

        <!-- Right Panel - VBox (Form) - ~60% Width -->
        <VBox alignment="CENTER_LEFT" maxWidth="Infinity" prefHeight="697.0" prefWidth="451.0" styleClass="right-panel" HBox.hgrow="ALWAYS">
            <padding>
                <Insets bottom="30" left="40" right="40" top="30" />
            </padding>

            <!-- Header -->
            <VBox spacing="5">
                <Text styleClass="title" text="Create Account" />
                <Text styleClass="subtitle" text="Join our community of students and alumni" />
            </VBox>

            <!-- Form Container - VBox -->
            <VBox alignment="CENTER_LEFT" spacing="12" styleClass="form-container" VBox.vgrow="ALWAYS">
                <VBox.margin>
                    <Insets top="20" />
                </VBox.margin>

                <!-- Global Feedback Label -->
                <Label fx:id="feedbackLabel" minHeight="20" styleClass="error-label-global" wrapText="true" />

                <!-- Full Name -->
                <VBox fx:id="fullNameGroup" spacing="2" styleClass="form-group">
                    <Label styleClass="form-label" text="Full Name" />
                    <TextField fx:id="fullNameField" promptText="Enter your full name" styleClass="form-input" />
                    <Label fx:id="fullNameErrorLabel" managed="false" styleClass="error-label" visible="false" />
                </VBox>

                <!-- Email -->
                <VBox fx:id="emailGroup" spacing="2" styleClass="form-group">
                    <Label styleClass="form-label" text="Email Address" />
                    <TextField fx:id="emailField" promptText="your.email@university.edu" styleClass="form-input" />
                    <Label fx:id="emailErrorLabel" managed="false" styleClass="error-label" visible="false" />
                </VBox>

                <!-- Password with Toggle -->
                <VBox fx:id="passwordGroup" spacing="2" styleClass="form-group">
                    <Label styleClass="form-label" text="Password" />
                    <StackPane fx:id="passwordStack" alignment="CENTER_RIGHT">
                        <!-- Visible Field (Hidden by default) -->
                        <TextField fx:id="visiblePasswordField" promptText="Create a strong password" styleClass="form-input" visible="false" />
                        <!-- Password Field -->
                        <PasswordField fx:id="passwordField" promptText="Create a strong password" styleClass="form-input" />
                        <!-- Eye Icon Button -->
                        <Button fx:id="passwordVisibilityBtn" focusTraversable="false" styleClass="icon-button" text="ðŸ‘">
                            <StackPane.margin>
                                <Insets right="10" />
                            </StackPane.margin>
                        </Button>
                    </StackPane>
                    <!-- Strength Indicator -->
                    <HBox fx:id="strengthIndicator" managed="false" prefHeight="4" spacing="4" visible="false">
                        <Rectangle arcHeight="2" arcWidth="2" height="4" styleClass="strength-bar" width="50" />
                        <Rectangle arcHeight="2" arcWidth="2" height="4" styleClass="strength-bar" width="50" />
                        <Rectangle arcHeight="2" arcWidth="2" height="4" styleClass="strength-bar" width="50" />
                    </HBox>
                    <Label fx:id="passwordErrorLabel" managed="false" styleClass="error-label" visible="false" />
                </VBox>

                <!-- Confirm Password with Toggle -->
                <VBox fx:id="confirmPasswordGroup" spacing="2" styleClass="form-group">
                    <Label styleClass="form-label" text="Confirm Password" />
                    <StackPane fx:id="confirmPasswordStack" alignment="CENTER_RIGHT">
                        <TextField fx:id="visibleConfirmPasswordField" promptText="Confirm your password" styleClass="form-input" visible="false" />
                        <PasswordField fx:id="confirmPasswordField" promptText="Confirm your password" styleClass="form-input" />
                        <Button fx:id="confirmPasswordVisibilityBtn" focusTraversable="false" styleClass="icon-button" text="ðŸ‘">
                            <StackPane.margin>
                                <Insets right="10" />
                            </StackPane.margin>
                        </Button>
                    </StackPane>
                    <Label fx:id="confirmPasswordErrorLabel" managed="false" styleClass="error-label" visible="false" />
                </VBox>

                <!-- Role Selection -->
                <VBox spacing="8" styleClass="role-selection">
                    <Label styleClass="form-label" text="I am a:" />

                    <HBox spacing="15" styleClass="role-selector" VBox.vgrow="NEVER">
                        <fx:define>
                            <ToggleGroup fx:id="roleGroup" />
                        </fx:define>

                        <ToggleButton fx:id="studentRole" maxWidth="Infinity" selected="true" styleClass="role-box" HBox.hgrow="ALWAYS">
                            <graphic>
                                <HBox alignment="CENTER" spacing="10">
                                    <!-- Graduation Cap Unicode -->
                                    <Text styleClass="role-icon" text="ðŸŽ“" />
                                    <Text styleClass="role-text" text="Student" />
                                </HBox>
                            </graphic>
                     <toggleGroup>
                        <ToggleGroup fx:id="roleGroup" />
                     </toggleGroup>
                        </ToggleButton>

                        <ToggleButton fx:id="alumniRole" maxWidth="Infinity" styleClass="role-box" toggleGroup="$roleGroup" HBox.hgrow="ALWAYS">
                            <graphic>
                                <HBox alignment="CENTER" spacing="10">
                                    <!-- Briefcase/Suitcase Unicode -->
                                    <Text styleClass="role-icon" text="ðŸ’¼" />
                                    <Text styleClass="role-text" text="Alumni" />
                                </HBox>
                            </graphic>
                        </ToggleButton>
                    </HBox>
                </VBox>

                <!-- Submit Button -->
                <Button fx:id="submitBtn" maxWidth="Infinity" onAction="#handleRegistration" styleClass="submit-btn" text="Create Account">
                    <VBox.margin>
                        <Insets top="10" />
                    </VBox.margin>
                </Button>

                <!-- Login Link -->
                <HBox alignment="CENTER" spacing="5" styleClass="login-link-container">
                    <Text styleClass="login-text" text="Already have an account?" />
                    <Hyperlink onAction="#goToLogin" styleClass="login-link" text="Login here">
                  <HBox.margin>
                     <Insets left="-110.0" top="10.0" />
                  </HBox.margin>
                  <font>
                     <Font size="15.0" />
                  </font></Hyperlink>
                </HBox>
            </VBox>
        </VBox>
    </HBox>
</StackPane>
