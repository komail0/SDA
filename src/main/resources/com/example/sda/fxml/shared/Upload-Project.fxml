<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>
<?import java.lang.String?>

<ScrollPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.sda.controllers.shared.UploadProjectController"
            styleClass="scroll-pane"
            stylesheets="@../../css/styles/Upload-Project.css"
            fitToWidth="true"
            hbarPolicy="NEVER">

    <!-- Main Content Wrapper -->
    <VBox styleClass="content-wrapper" VBox.vgrow="ALWAYS" alignment="CENTER">
        <!-- Status and Feedback Label -->
        <Label fx:id="statusLabel" text="" minHeight="25" wrapText="true" />

        <!-- Content Container (VBox) -->
        <VBox styleClass="content-container" alignment="TOP_CENTER">

            <!-- Page Header -->
            <VBox styleClass="page-header">
                <HBox styleClass="title-container">
                    <Text text="Upload" styleClass="page-title, title-accent"/>
                    <Text text=" Project Summary" styleClass="page-title"/>
                </HBox>
                <Label text="Share your project and help future students" styleClass="page-subtitle"/>
            </VBox>

            <!-- Upload Form -->
            <VBox fx:id="uploadForm" styleClass="upload-form">

                <!-- Project Title -->
                <VBox styleClass="form-group">
                    <HBox styleClass="label-container">
                        <Label text="Project Title " styleClass="form-label"/>
                        <Label text="*" styleClass="form-label, required"/>
                    </HBox>
                    <TextField fx:id="titleField" promptText="Enter project title (Max 255 chars)" styleClass="form-input"/>
                </VBox>

                <!-- GitHub Link (NEW) -->
                <VBox styleClass="form-group">
                    <HBox styleClass="label-container">
                        <Label text="GitHub Repository Link" styleClass="form-label"/>
                    </HBox>
                    <TextField fx:id="githubField" promptText="Optional: https://github.com/your-project" styleClass="form-input"/>
                </VBox>

                <!-- Project Description -->
                <VBox styleClass="form-group">
                    <HBox styleClass="label-container">
                        <Label text="Project Description " styleClass="form-label"/>
                        <Label text="*" styleClass="form-label, required"/>
                    </HBox>
                    <TextArea fx:id="descriptionArea" promptText="Describe your project in detail (Min 50 chars)..." styleClass="form-textarea" wrapText="true" />
                </VBox>

                <!-- Form Grid (3 columns) -->
                <GridPane styleClass="form-grid" hgap="20" vgap="20">
                    <!-- Category (Changed to TextField) -->
                    <VBox styleClass="form-group" GridPane.columnIndex="0" GridPane.rowIndex="0">
                        <HBox styleClass="label-container">
                            <Label text="Category " styleClass="form-label"/>
                            <Label text="*" styleClass="form-label, required"/>
                        </HBox>
                        <TextField fx:id="categoryField" promptText="e.g., AI/ML, Web Development" styleClass="form-input" prefWidth="250"/>
                    </VBox>

                    <!-- Year (Changed to DatePicker) -->
                    <VBox styleClass="form-group" GridPane.columnIndex="1" GridPane.rowIndex="0">
                        <HBox styleClass="label-container">
                            <Label text="Completion Date " styleClass="form-label"/>
                            <Label text="*" styleClass="form-label, required"/>
                        </HBox>
                        <DatePicker fx:id="yearPicker" promptText="Select completion date" styleClass="form-input, form-select" prefWidth="250"/>
                    </VBox>

                    <!-- University (NEW) -->
                    <VBox styleClass="form-group" GridPane.columnIndex="0" GridPane.rowIndex="1">
                        <HBox styleClass="label-container">
                            <Label text="University " styleClass="form-label"/>
                            <Label text="*" styleClass="form-label, required"/>
                        </HBox>
                        <TextField fx:id="universityField" promptText="e.g., XYZ University" styleClass="form-input" prefWidth="250"/>
                    </VBox>

                    <!-- Supervisor (Existing) -->
                    <VBox styleClass="form-group" GridPane.columnIndex="1" GridPane.rowIndex="1">
                        <Label text="Supervisor" styleClass="form-label"/>
                        <TextField fx:id="supervisorField" promptText="Optional: Professor/Advisor name" styleClass="form-input" prefWidth="250"/>
                    </VBox>

                    <!-- Technologies Used (Span 2 columns) -->
                    <VBox styleClass="form-group" GridPane.columnIndex="0" GridPane.rowIndex="2" GridPane.columnSpan="2">
                        <Label text="Technologies Used" styleClass="form-label"/>
                        <TextField fx:id="technologiesField" promptText="Optional: Python, TensorFlow, React, MySQL (Comma-separated)" styleClass="form-input"/>
                    </VBox>

                </GridPane>

                <!-- File Upload Section -->
                <VBox styleClass="file-upload-section">
                    <HBox styleClass="label-container">
                        <Label text="ðŸ“Ž Upload Project PDF " styleClass="upload-label"/>
                        <Label text="*" styleClass="form-label, required"/>
                    </HBox>

                    <!-- Upload Area -->
                    <VBox fx:id="uploadArea" styleClass="upload-area" onMouseClicked="#handleFileBrowse">
                        <Label text="ðŸ“" styleClass="upload-icon"/>
                        <Label text="Click here to browse for PDF file" styleClass="upload-text"/>
                        <Label text="or" styleClass="upload-or"/>
                        <Button fx:id="browseBtn" text="Browse Files" styleClass="browse-btn" onAction="#handleFileBrowse"/>
                        <Label text="REQUIRED: PDF file only (Max 5 MB)" styleClass="upload-hint"/>
                    </VBox>

                    <!-- File List (shown when file is selected) -->
                    <VBox styleClass="file-list" fx:id="fileListContainer" managed="false">
                        <!-- File Item (Dynamically added HBox) -->
                        <HBox fx:id="fileItem" styleClass="file-item">
                            <Label text="ðŸ“„" styleClass="file-icon"/>
                            <VBox styleClass="file-info" HBox.hgrow="ALWAYS">
                                <Label fx:id="fileNameLabel" text="[No file selected]" styleClass="file-name"/>
                                <Label fx:id="fileSizeLabel" text="" styleClass="file-size"/>
                            </VBox>
                            <Button fx:id="removeFileBtn" text="Remove" styleClass="file-remove" onAction="#handleFileRemove"/>
                        </HBox>
                        <!-- Error feedback specific to file -->
                        <Label fx:id="fileErrorLabel" text="" styleClass="file-error" />
                    </VBox>
                </VBox>

                <!-- Form Actions -->
                <HBox styleClass="form-actions">
                    <Button fx:id="cancelBtn" text="Cancel" styleClass="cancel-btn" onAction="#handleCancel"/>
                    <Button fx:id="submitBtn" text="Submit Project" styleClass="submit-btn" onAction="#handleSubmit"/>
                </HBox>

            </VBox>

        </VBox>
    </VBox>
</ScrollPane>